<div class="relative min-h-screen">
  <img
    src="img/background_almuerza_peru.png"
    [attr.alt]="t('common.background')"
    class="absolute inset-0 w-full h-full object-cover opacity-100"
  />

  <app-back-button position="top-left" (click)="onBackClick()"></app-back-button>

  <div class="relative z-10 flex items-end sm:items-center justify-center min-h-[95vh]">
    <div
      class="bg-white bg-opacity-90 rounded-xl shadow-lg p-6 w-full max-w-md max-h-[85vh] flex flex-col items-center overflow-y-auto"
    >
      <div class="mb-6 flex justify-center">
        <app-step-indicator [step]="1" [total]="4"></app-step-indicator>
      </div>

      <h1 class="text-center text-3xl font-bold text-gray-800 uppercase mb-2">
        {{ t('app.name') }}
      </h1>

      <p class="text-center text-gray-600 mb-6">Información Básica del Restaurante</p>
      <form [formGroup]="restaurantForm" class="w-full space-y-6">
        <app-input-field
          label="Nombre del Restaurante*"
          icon="restaurant"
          placeholder="Ej: Restaurante El Sabor Criollo"
          formControlName="restaurantName"
        ></app-input-field>

        <app-input-field
          label="Correo Electrónico*"
          icon="email"
          type="email"
          placeholder="contacto@mirestaurante.com"
          formControlName="email"
        ></app-input-field>

        <app-input-field
          label="DNI del Propietario*"
          icon="badge"
          placeholder="12345678"
          formControlName="ownerDni"
        ></app-input-field>

        <app-input-field
          label="Número de Celular*"
          icon="phone"
          placeholder="987654321"
          formControlName="phoneNumber"
        ></app-input-field>

        <app-select-field
          label="Provincia*"
          icon="location_on"
          placeholder="Selecciona tu provincia"
          [options]="provinciaOptions"
          formControlName="provincia"
        ></app-select-field>

        <app-select-field
          label="Distrito*"
          icon="place"
          placeholder="Selecciona tu distrito"
          [options]="distritoOptions"
          formControlName="distrito"
        ></app-select-field>

        <app-input-field
          label="Dirección*"
          icon="location_on"
          placeholder="Av. Larco 123, Miraflores"
          formControlName="address"
          actionIcon="map"
          (actionIconClick)="openLocationModal()"
        ></app-input-field>

        <app-input-field
          label="RUC de la Empresa (opcional)"
          icon="business"
          placeholder="20123456789"
          formControlName="ruc"
        ></app-input-field>

        <app-input-field
          label="Razón Social / Propietario"
          icon="person"
          placeholder="Ingresa la razón social o nombre del propietario"
          formControlName="razonSocial"
          [disabled]="!isRazonSocialEnabled"
        ></app-input-field>

        <div class="pt-4">
          <app-button
            [label]="'Continuar'"
            [isActive]="restaurantForm.valid"
            [isOutline]="false"
            iconName="arrow_forward"
            (click)="onSubmit()"
            class="w-full"
          ></app-button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal de selección de ubicación -->
<app-location-selector-modal
  [isVisible]="isLocationModalVisible"
  [searchQuery]="locationSearchQuery"
  (closeModal)="closeLocationModal()"
  (confirmLocation)="onLocationConfirmed($event)"
  (searchQueryChange)="onLocationSearchChange($event)"
></app-location-selector-modal>
