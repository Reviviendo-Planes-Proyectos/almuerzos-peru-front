<div class="min-h-screen">
  <!-- Inputs file ocultos -->
  <input
    #restaurantFileInput
    type="file"
    accept="image/png,image/jpeg,image/jpg"
    (change)="onRestaurantFileInputChange($event)"
    class="hidden"
    style="display: none"
  />
  <input
    #logoFileInput
    type="file"
    accept="image/png,image/jpeg,image/jpg"
    (change)="onLogoFileInputChange($event)"
    class="hidden"
    style="display: none"
  />

  <!-- Header con pasos -->
  <app-header-with-steps
    [currentStep]="currentStep"
    [showBackButton]="true"
    (backClick)="onBackClick()"
  ></app-header-with-steps>

  <div class="flex flex-col gap-6 max-w-sm mx-auto p-6">
    <!-- Paso del formulario -->
    <app-step-indicator [step]="currentStep" [total]="6"></app-step-indicator>

    <!-- Icono grande centrado -->
    <div class="flex justify-center mb-2">
      <div class="w-16 h-16 bg-purple-500 rounded-2xl flex items-center justify-center">
        <i class="material-icons text-white text-3xl">photo_camera</i>
      </div>
    </div>

    <!-- Título -->
    <div class="text-center mb-2">
      <h2 class="text-xl font-semibold text-gray-900 mb-2">Imágenes del Restaurante</h2>
      <p class="text-gray-600 text-sm">Muestra lo mejor de tu negocio</p>
    </div>

    <!-- Sección Foto del Local o Portada -->
    <div class="bg-white rounded-2xl p-6 shadow-sm mb-2">
      <div class="mb-4">
        <h3 class="text-lg font-semibold text-gray-900 mb-1">Foto del Local o Portada</h3>
        <p class="text-gray-600 text-sm">Una foto atractiva de tu restaurante que será la imagen principal</p>
      </div>

      <!-- Preview de la imagen del restaurante o componente de upload -->
      <div *ngIf="!hasRestaurantPhoto">
        <app-file-upload
          [hasSelectedImage]="hasRestaurantPhoto"
          (fileSelected)="onRestaurantPhotoSelected($event)"
          (fileError)="onRestaurantPhotoError($event)"
        ></app-file-upload>
      </div>

      <!-- Preview de la imagen seleccionada -->
      <div *ngIf="hasRestaurantPhoto && restaurantPhotoPreview" class="relative mb-4">
        <img [src]="restaurantPhotoPreview" alt="Foto del restaurante" class="w-full h-48 object-cover rounded-lg" />
        <button
          (click)="removeRestaurantPhoto()"
          class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors"
        >
          <i class="material-icons text-sm">close</i>
        </button>
      </div>

      <!-- Botón para seleccionar archivo si hay imagen -->
      <!--  <div *ngIf="hasRestaurantPhoto" class="mt-4 text-center">
                <button (click)="removeRestaurantPhoto(); hasRestaurantPhoto = false"
                    class="text-orange-500 hover:text-orange-600 text-sm font-medium flex items-center justify-center gap-2 mx-auto">
                    <i class="material-icons text-lg">file_upload</i>
                    <span>Seleccionar archivo</span>
                </button>
            </div> -->

      <app-button
        *ngIf="hasRestaurantPhoto"
        [label]="'Seleccionar archivo'"
        [isActive]="true"
        [isOutline]="true"
        iconName="file_upload"
        (click)="triggerRestaurantFileInput()"
      ></app-button>
    </div>

    <!-- Sección Logo del Restaurante -->
    <div class="bg-white rounded-2xl p-6 shadow-sm mb-2">
      <div class="mb-4">
        <h3 class="text-lg font-semibold text-gray-900 mb-1">Logo del Restaurante</h3>
        <p class="text-gray-600 text-sm">Tu logo aparecerá en el perfil y pedidos</p>
      </div>

      <!-- Preview del logo o componente de upload -->
      <div *ngIf="!hasLogoPhoto">
        <app-file-upload
          [hasSelectedImage]="hasLogoPhoto"
          (fileSelected)="onLogoPhotoSelected($event)"
          (fileError)="onLogoPhotoError($event)"
        ></app-file-upload>
      </div>

      <!-- Preview del logo seleccionado -->
      <div *ngIf="hasLogoPhoto && logoPhotoPreview" class="relative mb-4">
        <img [src]="logoPhotoPreview" alt="Logo del restaurante" class="w-full h-48 object-cover rounded-lg" />
        <button
          (click)="removeLogo()"
          class="absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors"
        >
          <i class="material-icons text-sm">close</i>
        </button>
      </div>

      <!-- Botón para seleccionar archivo si hay logo -->
      <!-- <div *ngIf="hasLogoPhoto" class="mt-4 text-center">
                <button (click)="removeLogo(); hasLogoPhoto = false"
                    class="text-orange-500 hover:text-orange-600 text-sm font-medium flex items-center justify-center gap-2 mx-auto">
                    <i class="material-icons text-lg">file_upload</i>
                    <span>Seleccionar archivo</span>
                </button>
            </div> -->

      <app-button
        *ngIf="hasLogoPhoto"
        [label]="'Seleccionar archivo'"
        [isActive]="true"
        [isOutline]="true"
        iconName="file_upload"
        (click)="triggerLogoFileInput()"
      ></app-button>
    </div>

    <!-- Botón Continuar -->
    <app-button
      [label]="'Continuar'"
      [isActive]="true"
      [iconName]="'arrow_forward'"
      [isOutline]="false"
      (click)="continue()"
    ></app-button>

    <!-- Opciones adicionales -->
    <div class="flex flex-col gap-4 text-center mt-2">
      <div class="bg-gray-50 p-4 rounded-lg">
        <p class="text-gray-500 text-sm mb-3">¿Prefieres subir las imágenes más tarde?</p>
        <!--   <app-button [label]="'Hacer Más Tarde'" [iconName]="'schedule'" [isActive]="true" [outlineGray]="true"
                    (click)="doLater()">
                </app-button>
                <br /> -->
        <app-button [label]="'Atrás'" [isActive]="true" [outlineGray]="true" (click)="goBack()"></app-button>
      </div>
    </div>
  </div>

  <!-- Modal de advertencia posicionado en esquina superior derecha -->
  <app-warning-modal
    [isVisible]="showWarningModal"
    title="Celular sin verificar"
    message="Tu celular +51 9*** aún no está verificado."
    primaryButtonText="Verificar celular"
    secondaryButtonText="Recordar después"
    (primaryAction)="onVerifyPhone()"
    (secondaryAction)="onRemindLater()"
    (closeModal)="onCloseWarningModal()"
  ></app-warning-modal>
</div>
