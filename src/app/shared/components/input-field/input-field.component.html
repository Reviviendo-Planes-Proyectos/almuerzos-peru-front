<div class="flex flex-col gap-1 w-full">
  <!-- Label -->
  <label class="text-sm font-medium text-gray-700">{{ label }}</label>

  <!-- Input + icono -->
  <div class="relative">
    <!-- Ícono izquierdo -->
    <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
      <i class="material-icons">{{ icon }}</i>
    </span>

    <!-- Input -->
    <input
      [type]="type"
      [placeholder]="placeholder"
      [required]="required"
      [value]="value"
      [disabled]="disabled"
      class="pl-10 pr-12 py-3 w-full border-2 rounded-lg focus:outline-none transition-all"
      [ngClass]="{
        'border-gray-200 focus:border-orange-500': !control?.touched,
        'border-green-500': control?.valid && control?.touched,
        'border-red-500': control?.invalid && control?.touched
      }"
      (blur)="onBlur()"
      (input)="onInput($event)"
    />

    <!-- Ícono de validación derecho -->
    <span class="absolute inset-y-0 right-0 flex items-center pr-3" *ngIf="control?.touched">
      <div
        class="w-6 h-6 rounded-full flex items-center justify-center"
        [ngClass]="{
          'bg-green-500': control?.valid,
          'bg-red-500': control?.invalid
        }"
      >
        <i
          class="material-icons text-white text-sm"
          [ngClass]="{
            'text-white': control?.valid || control?.invalid
          }"
        >
          {{ control?.valid ? 'check' : 'close' }}
        </i>
      </div>
    </span>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="showError" class="text-sm text-red-500 mt-1">
    <ng-container *ngIf="control?.errors?.['required']">Este campo es obligatorio.</ng-container>
    <ng-container *ngIf="control?.errors?.['email']">Ingresa un correo válido.</ng-container>
    <ng-container *ngIf="control?.errors?.['minlength']">
      Mínimo {{ control.errors?.['minlength'].requiredLength }} caracteres.
    </ng-container>
  </div>
</div>
