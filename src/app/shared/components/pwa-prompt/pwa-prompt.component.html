<div class="pwa-overlay" *ngIf="showInstallPrompt" (click)="dismissPrompt()"></div>

<!-- Banner para actualizaciones disponibles -->
<div class="update-banner" *ngIf="updateAvailable">
  <div class="update-content">
    <mat-icon>system_update</mat-icon>
    <span>Nueva versión disponible</span>
    <button mat-button (click)="updateApp()">Actualizar</button>
    <button mat-icon-button (click)="dismissUpdate()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</div>

<!-- Prompt de instalación automático -->
<div class="pwa-prompt" *ngIf="showInstallPrompt">
  <div class="prompt-header">
    <div class="header-gradient"></div>
    <div class="app-logo">
      <mat-icon class="app-icon">restaurant_menu</mat-icon>
      <div class="logo-rings">
        <div class="ring ring-1"></div>
        <div class="ring ring-2"></div>
        <div class="ring ring-3"></div>
      </div>
    </div>
    <button class="close-btn" (click)="dismissPrompt()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="prompt-content">
    <div class="content-main">
      <h2 class="app-title">¡Instala Almuerzos Perú!</h2>
      <p class="app-subtitle">La mejor experiencia gastronómica peruana</p>

      <div class="features-list">
        <div class="feature-item">
          <mat-icon>notifications_active</mat-icon>
          <span>Notificaciones de ofertas</span>
        </div>
        <div class="feature-item">
          <mat-icon>offline_bolt</mat-icon>
          <span>Funciona sin internet</span>
        </div>
        <div class="feature-item">
          <mat-icon>speed</mat-icon>
          <span>Acceso ultra rápido</span>
        </div>
      </div>

      <div class="action-buttons">
        <button class="install-btn" (click)="installApp()" mat-raised-button>
          <mat-icon>get_app</mat-icon>
          <span>Instalar App</span>
          <div class="btn-shine"></div>
        </button>
        <button class="later-btn" (click)="dismissPrompt()" mat-button>Más tarde</button>
      </div>
    </div>
  </div>
</div>

<!-- FAB principal para instalación PWA -->
<button
  mat-fab
  class="install-fab"
  color="primary"
  *ngIf="!showInstallPrompt && isMobile && showFabAfter30Seconds"
  (click)="showPrompt()"
  matTooltip="Instalar Almuerzos Perú"
  matTooltipPosition="left"
>
  <mat-icon>restaurant_menu</mat-icon>
</button>
