<div class="relative inline-flex items-center">
  <input
    type="checkbox"
    [id]="toggleId"
    [checked]="checked"
    [disabled]="disabled"
    (change)="toggle()"
    [attr.aria-label]="ariaLabel"
    class="sr-only"
  />
  <label
    [for]="toggleId"
    class="relative inline-flex w-16 h-8 rounded-full cursor-pointer transition-all duration-500 ease-in-out transform hover:scale-105 focus-within:ring-4 focus-within:ring-orange-200 focus-within:ring-opacity-50"
    [class.bg-gradient-to-r]="checked"
    [class.from-orange-400]="checked"
    [class.to-orange-600]="checked"
    [class.shadow-lg]="checked"
    [class.shadow-orange-300]="checked"
    [class.bg-gray-300]="!checked"
    [class.cursor-not-allowed]="disabled"
    [class.opacity-50]="disabled"
    [class.shadow-inner]="!checked && !disabled"
  >
    <!-- Glow effect when active -->
    <div
      *ngIf="checked && !disabled"
      class="absolute inset-0 rounded-full bg-gradient-to-r from-orange-400 to-orange-600 opacity-30 blur-md scale-110 animate-pulse"
    ></div>

    <!-- Toggle thumb -->
    <div
      class="absolute z-10 top-1 left-1 w-6 h-6 bg-white rounded-full shadow-lg transform transition-all duration-500 ease-in-out flex items-center justify-center"
      [class.translate-x-8]="checked"
      [class.translate-x-0]="!checked"
      [class.shadow-xl]="checked"
      [class.scale-110]="checked"
    >
      <!-- Icon inside thumb when active -->
      <div
        *ngIf="checked"
        class="w-3 h-3 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 animate-spin"
        style="animation-duration: 2s"
      ></div>

      <!-- Icon inside thumb when inactive -->
      <div *ngIf="!checked" class="w-2 h-2 rounded-full bg-gray-400 transition-all duration-300"></div>
    </div>

    <!-- Background sparkles when active -->
    <div *ngIf="checked && !disabled" class="absolute inset-0 rounded-full overflow-hidden">
      <div class="absolute top-1 left-3 w-1 h-1 bg-white rounded-full opacity-70 animate-ping"></div>
      <div
        class="absolute top-4 right-2 w-0.5 h-0.5 bg-white rounded-full opacity-50 animate-ping"
        style="animation-delay: 0.5s"
      ></div>
      <div
        class="absolute bottom-1 left-5 w-0.5 h-0.5 bg-white rounded-full opacity-60 animate-ping"
        style="animation-delay: 1s"
      ></div>
    </div>
  </label>
</div>
